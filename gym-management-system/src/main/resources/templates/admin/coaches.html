<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>教练管理 - 健身房管理系统</title>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/font-awesome@4.7.0/css/font-awesome.min.css">
    <style>
        body {
            font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, sans-serif;
            background-color: #f8f9fa;
        }
        .sidebar {
            min-height: 100vh;
            background-color: #2c3e50;
            color: white;
            padding: 1rem;
        }
        .sidebar h4 {
            border-bottom: 1px solid #34495e;
            padding-bottom: 0.5rem;
            margin-bottom: 1rem;
        }
        .sidebar a {
            color: #ecf0f1;
            display: block;
            padding: 0.5rem 1rem;
            margin-bottom: 0.25rem;
            border-radius: 4px;
            text-decoration: none;
            transition: all 0.3s ease;
        }
        .sidebar a:hover,
        .sidebar a.active {
            background-color: #34495e;
            color: #3498db;
        }
        .content {
            padding: 2rem;
        }
        .card {
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            margin-bottom: 1.5rem;
        }
        .coach-form {
            background-color: white;
            padding: 2rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        }
        .table-container {
            background-color: white;
            padding: 1.5rem;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
            overflow-x: auto;
        }
        .table thead {
            background-color: #f8f9fa;
        }
        .table th,
        .table td {
            padding: 0.75rem 1rem;
            vertical-align: middle;
        }
        .btn {
            font-size: 0.875rem;
            padding: 0.25rem 0.75rem;
            margin: 0 0.25rem;
        }
        .coach-avatar {
            width: 50px;
            height: 50px;
            border-radius: 50%;
            object-fit: cover;
        }
        .coach-specialty {
            display: inline-block;
            background-color: #e3f2fd;
            color: #1565c0;
            padding: 0.25rem 0.75rem;
            border-radius: 1rem;
            font-size: 0.75rem;
            margin: 0.25rem;
        }
        .form-group {
            margin-bottom: 1.5rem;
        }
        .form-label {
            font-weight: 500;
            margin-bottom: 0.5rem;
        }
        .input-group-text {
            background-color: #f8f9fa;
        }
    </style>
</head>
<body>
    <div class="container-fluid">
        <div class="row">
            <!-- 侧边栏 -->
            <div class="col-md-2 sidebar">
                <h4>管理系统</h4>
                <a th:href="@{/admin}">首页</a>
                <a th:href="@{/admin/members}">会员管理</a>
                <a th:href="@{/admin/coaches}" class="active">教练管理</a>
                <a th:href="@{/admin/courses}">课程管理</a>
                <a th:href="@{/admin/cards}">会员卡设置</a>
                <a th:href="@{/logout}">退出登录</a>
            </div>

            <!-- 主内容区 -->
            <div class="col-md-10 content">
                <h2 class="mb-4">教练管理</h2>

                <!-- 教练添加表单 -->
                <div class="coach-form mb-4">
                    <h4 class="mb-3">添加教练</h4>
                    <form id="coachForm" enctype="multipart/form-data">
                        <div class="row g-3">
                            <div class="col-md-6">
                                <label for="coachName" class="form-label">姓名</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fa fa-user"></i></span>
                                    <input type="text" class="form-control" id="coachName" placeholder="请输入教练姓名" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="coachPhone" class="form-label">手机号</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fa fa-phone"></i></span>
                                    <input type="tel" class="form-control" id="coachPhone" placeholder="请输入手机号" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="coachGender" class="form-label">性别</label>
                                <select class="form-select" id="coachGender" required>
                                    <option value="">请选择性别</option>
                                    <option value="男">男</option>
                                    <option value="女">女</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="coachAge" class="form-label">年龄</label>
                                <div class="input-group">
                                    <span class="input-group-text"><i class="fa fa-calendar"></i></span>
                                    <input type="number" class="form-control" id="coachAge" min="18" max="65" placeholder="请输入年龄" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="coachTitle" class="form-label">职称</label>
                                <select class="form-select" id="coachTitle" required>
                                    <option value="">请选择职称</option>
                                    <option value="初级教练">初级教练</option>
                                    <option value="中级教练">中级教练</option>
                                    <option value="高级教练">高级教练</option>
                                    <option value="资深教练">资深教练</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="coachSpecialty" class="form-label">专长</label>
                                <select class="form-select" id="coachSpecialty" required>
                                    <option value="">请选择专长</option>
                                    <option value="力量训练">力量训练</option>
                                    <option value="有氧训练">有氧训练</option>
                                    <option value="瑜伽">瑜伽</option>
                                    <option value="普拉提">普拉提</option>
                                    <option value="拳击">拳击</option>
                                    <option value="功能性训练">功能性训练</option>
                                    <option value="康复训练">康复训练</option>
                                </select>
                            </div>
                            <div class="col-md-6">
                                <label for="coachSalary" class="form-label">薪资标准 (¥)</label>
                                <div class="input-group">
                                    <span class="input-group-text">¥</span>
                                    <input type="number" class="form-control" id="coachSalary" min="0" step="0.01" placeholder="请输入薪资" required>
                                </div>
                            </div>
                            <div class="col-md-6">
                                <label for="coachStatus" class="form-label">状态</label>
                                <select class="form-select" id="coachStatus" required>
                                    <option value="active">在职</option>
                                    <option value="inactive">离职</option>
                                    <option value="vacation">休假</option>
                                </select>
                            </div>
                            <div class="col-md-12">
                                <label for="coachAvatar" class="form-label">头像</label>
                                <input type="file" class="form-control" id="coachAvatar" accept="image/*">
                                <small class="form-text text-muted">支持JPG、PNG格式，建议尺寸200x200</small>
                            </div>
                            <div class="col-md-12">
                                <label for="coachDescription" class="form-label">个人简介</label>
                                <textarea class="form-control" id="coachDescription" rows="4" placeholder="请输入教练个人简介"></textarea>
                            </div>
                            <div class="col-md-12">
                                <button type="button" class="btn btn-primary" onclick="saveCoach()">
                                    <i class="fa fa-save"></i> 保存教练信息
                                </button>
                                <button type="button" class="btn btn-outline-secondary" onclick="resetForm()">
                                    <i class="fa fa-refresh"></i> 重置
                                </button>
                            </div>
                        </div>
                    </form>
                </div>

                <!-- 教练列表 -->
                <div class="table-container">
                    <h4 class="mb-3">教练列表</h4>
                    <table class="table table-striped">
                        <thead>
                            <tr>
                                <th>头像</th>
                                <th>姓名</th>
                                <th>手机号</th>
                                <th>性别</th>
                                <th>职称</th>
                                <th>专长</th>
                                <th>状态</th>
                                <th>操作</th>
                            </tr>
                        </thead>
                        <tbody id="coachTableBody">
                            <!-- 模拟数据 -->
                            <tr>
                                <td><img src="https://picsum.photos/id/1/50/50" class="coach-avatar" alt="头像"></td>
                                <td>陈教练</td>
                                <td>13800138001</td>
                                <td>男</td>
                                <td>高级教练</td>
                                <td><span class="coach-specialty">力量训练</span><span class="coach-specialty">拳击</span></td>
                                <td><span class="badge bg-success">在职</span></td>
                                <td>
                                    <button class="btn btn-info" onclick="viewCoach(1)"><i class="fa fa-eye"></i></button>
                                    <button class="btn btn-warning" onclick="editCoach(1)"><i class="fa fa-edit"></i></button>
                                    <button class="btn btn-danger" onclick="deleteCoach(1)"><i class="fa fa-trash"></i></button>
                                </td>
                            </tr>
                            <tr>
                                <td><img src="https://picsum.photos/id/2/50/50" class="coach-avatar" alt="头像"></td>
                                <td>林教练</td>
                                <td>13800138002</td>
                                <td>女</td>
                                <td>资深教练</td>
                                <td><span class="coach-specialty">瑜伽</span><span class="coach-specialty">普拉提</span></td>
                                <td><span class="badge bg-success">在职</span></td>
                                <td>
                                    <button class="btn btn-info" onclick="viewCoach(2)"><i class="fa fa-eye"></i></button>
                                    <button class="btn btn-warning" onclick="editCoach(2)"><i class="fa fa-edit"></i></button>
                                    <button class="btn btn-danger" onclick="deleteCoach(2)"><i class="fa fa-trash"></i></button>
                                </td>
                            </tr>
                            <tr>
                                <td><img src="https://picsum.photos/id/3/50/50" class="coach-avatar" alt="头像"></td>
                                <td>王教练</td>
                                <td>13800138003</td>
                                <td>男</td>
                                <td>中级教练</td>
                                <td><span class="coach-specialty">功能性训练</span></td>
                                <td><span class="badge bg-warning">休假</span></td>
                                <td>
                                    <button class="btn btn-info" onclick="viewCoach(3)"><i class="fa fa-eye"></i></button>
                                    <button class="btn btn-warning" onclick="editCoach(3)"><i class="fa fa-edit"></i></button>
                                    <button class="btn btn-danger" onclick="deleteCoach(3)"><i class="fa fa-trash"></i></button>
                                </td>
                            </tr>
                            <tr>
                                <td><img src="https://picsum.photos/id/4/50/50" class="coach-avatar" alt="头像"></td>
                                <td>张教练</td>
                                <td>13800138004</td>
                                <td>女</td>
                                <td>初级教练</td>
                                <td><span class="coach-specialty">有氧训练</span><span class="coach-specialty">康复训练</span></td>
                                <td><span class="badge bg-danger">离职</span></td>
                                <td>
                                    <button class="btn btn-info" onclick="viewCoach(4)"><i class="fa fa-eye"></i></button>
                                    <button class="btn btn-warning" onclick="editCoach(4)"><i class="fa fa-edit"></i></button>
                                    <button class="btn btn-danger" onclick="deleteCoach(4)"><i class="fa fa-trash"></i></button>
                                </td>
                            </tr>
                        </tbody>
                    </table>
                </div>
            </div>
        </div>
    </div>

    <!-- 教练详情模态框 -->
    <div class="modal fade" id="coachDetailModal" tabindex="-1" aria-labelledby="coachDetailModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-lg">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="coachDetailModalLabel">教练详情</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body" id="coachDetailContent">
                    <!-- 教练详情内容将通过JavaScript动态填充 -->
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                </div>
            </div>
        </div>
    </div>

    <script>
        // 初始化模态框
        const coachDetailModal = new bootstrap.Modal(document.getElementById('coachDetailModal'));

        // 保存教练信息
        function saveCoach() {
            // 验证表单
            if (!validateForm()) {
                alert('请填写必填字段并确保格式正确');
                return;
            }

            // 获取表单数据
            const formData = new FormData();
            formData.append('name', document.getElementById('coachName').value);
            formData.append('phone', document.getElementById('coachPhone').value);
            formData.append('gender', document.getElementById('coachGender').value);
            formData.append('age', document.getElementById('coachAge').value);
            formData.append('title', document.getElementById('coachTitle').value);
            formData.append('specialty', document.getElementById('coachSpecialty').value);
            formData.append('salary', document.getElementById('coachSalary').value);
            formData.append('status', document.getElementById('coachStatus').value);
            formData.append('description', document.getElementById('coachDescription').value);
            
            // 添加头像文件
            const avatarFile = document.getElementById('coachAvatar').files[0];
            if (avatarFile) {
                formData.append('avatar', avatarFile);
            }

            // 这里可以通过AJAX请求保存数据
            console.log('保存教练信息:', formData);
            
            // 模拟保存成功
            alert('教练信息保存成功！');
            resetForm();
        }

        // 重置表单
        function resetForm() {
            document.getElementById('coachForm').reset();
        }

        // 表单验证
        function validateForm() {
            const name = document.getElementById('coachName').value;
            const phone = document.getElementById('coachPhone').value;
            const gender = document.getElementById('coachGender').value;
            const age = document.getElementById('coachAge').value;
            const title = document.getElementById('coachTitle').value;
            const specialty = document.getElementById('coachSpecialty').value;
            const salary = document.getElementById('coachSalary').value;

            // 简单验证
            if (!name || !phone || !gender || !age || !title || !specialty || !salary) {
                return false;
            }

            // 手机号验证
            const phoneRegex = /^1[3-9]\d{9}$/;
            if (!phoneRegex.test(phone)) {
                alert('请输入正确的手机号格式');
                return false;
            }

            return true;
        }

        // 查看教练详情
        function viewCoach(id) {
            console.log('查看教练详情:', id);
            
            // 模拟教练详情数据
            const coachDetails = {
                id: id,
                name: `教练${id}`,
                phone: `13800138${String(id).padStart(3, '0')}`,
                gender: id % 2 === 0 ? '女' : '男',
                age: 25 + id,
                title: ['初级教练', '中级教练', '高级教练', '资深教练'][id % 4],
                specialty: ['力量训练', '瑜伽', '有氧训练', '功能性训练'][id % 4],
                salary: 8000 + id * 1000,
                status: ['active', 'inactive', 'vacation'][id % 3],
                description: `这是教练${id}的个人简介，拥有丰富的教学经验和专业技能。`,
                avatar: `https://picsum.photos/id/${id}/200/200`
            };

            // 构建详情HTML
            const statusMap = {
                active: { text: '在职', class: 'bg-success' },
                inactive: { text: '离职', class: 'bg-danger' },
                vacation: { text: '休假', class: 'bg-warning' }
            };

            const detailHTML = `
                <div class="row">
                    <div class="col-md-4 text-center">
                        <img src="${coachDetails.avatar}" style="width: 200px; height: 200px; border-radius: 50%; object-fit: cover;" alt="教练头像">
                    </div>
                    <div class="col-md-8">
                        <h4>${coachDetails.name}</h4>
                        <p><strong>手机号：</strong>${coachDetails.phone}</p>
                        <p><strong>性别：</strong>${coachDetails.gender}</p>
                        <p><strong>年龄：</strong>${coachDetails.age}岁</p>
                        <p><strong>职称：</strong>${coachDetails.title}</p>
                        <p><strong>专长：</strong><span class="coach-specialty">${coachDetails.specialty}</span></p>
                        <p><strong>薪资标准：</strong>¥${coachDetails.salary}</p>
                        <p><strong>状态：</strong><span class="badge ${statusMap[coachDetails.status].class}">${statusMap[coachDetails.status].text}</span></p>
                    </div>
                </div>
                <hr>
                <div class="row">
                    <div class="col-md-12">
                        <h5>个人简介</h5>
                        <p>${coachDetails.description}</p>
                    </div>
                </div>
            `;

            // 填充详情内容
            document.getElementById('coachDetailContent').innerHTML = detailHTML;
            
            // 显示模态框
            coachDetailModal.show();
        }

        // 编辑教练
        function editCoach(id) {
            console.log('编辑教练:', id);
            
            // 模拟获取教练信息并填充表单
            document.getElementById('coachName').value = `教练${id}`;
            document.getElementById('coachPhone').value = `13800138${String(id).padStart(3, '0')}`;
            document.getElementById('coachGender').value = id % 2 === 0 ? '女' : '男';
            document.getElementById('coachAge').value = 25 + id;
            
            // 滚动到表单顶部
            window.scrollTo({ top: 0, behavior: 'smooth' });
        }

        // 删除教练
        function deleteCoach(id) {
            if (confirm(`确定要删除ID为${id}的教练吗？`)) {
                console.log('删除教练:', id);
                alert(`教练ID: ${id} 已删除`);
                // 这里可以通过AJAX请求删除教练
            }
        }
    </script>
</body>
</html>